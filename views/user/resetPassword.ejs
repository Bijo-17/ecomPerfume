<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reset Password - Petal & Mist</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="/css/loginStyle.css" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

<div class="auth-container">
  <div class="brand-title text-center mb-4">ðŸŒ¸ Petal & Mist <br>Reset Password</div>

  <% if (message) { %>
    <div class="alert alert-danger text-center">
      <%= message %>
    </div>
  <% } %>
  <div  class="alert alert-danger text-center" id="errorbox" style="display:none;"></div>


  <form action="/saveNewPassword" method="post" class="mx-auto" style="max-width: 400px;">
    <div class="form-group mb-3">
      <i class="fas fa-lock form-icon"></i>
      <input type="password" class="form-control" name="password" placeholder="New Password" id="password" required />
    </div>

    <div class="form-group mb-3">
      <i class="fas fa-lock form-icon"></i>
      <input type="password" class="form-control" name="cPassword" placeholder="Confirm Password" id="cPassword" required />
    </div>

    <button type="submit" class="btn btn-dark w-100">Confirm</button>
  </form>
</div>

<script>

document.querySelector("form").addEventListener("submit",formValidate);

function formValidate (e){
  e.preventDefault();

    const passwordval = document.getElementById("password").value;
  const cPasswordval = document.getElementById("cPassword").value;
  const errormsg = document.getElementById("errorbox")
  const alpha = /[a-zA-z]/;
  const digit = /\d/;
console.log(passwordval)
console.log(cPasswordval)
  if(passwordval.length < 8){
           errormsg.style.display = "block"
          errormsg.textContent = "password must be atleast eight characters"
          return false;

} else if(!alpha.test(passwordval) || !digit.test(passwordval)){
      errormsg.style.display = "block";
      errormsg.textContent = "password should contain numbers and characters";
       return;

} else {
    errormsg.style.display = "none"
    errormsg.textContent = "" ;
   
  }

   if(passwordval !== cPasswordval){
   
    errormsg.style.display = "block"
    errormsg.textContent = "Password do not match" ;
    return;
  }  else {
    
    errormsg.style.display = "none"
    errormsg.innerHTML = "" ;
  
  }

  e.target.submit()

}


</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
