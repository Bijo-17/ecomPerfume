<style>
     .pagination-container {
    text-align: center;
    width: 100%;
    overflow-x: auto;
    white-space: nowrap;
    padding: 10px 0;
  }

  .pagination {
    display: flex;
    flex-wrap: nowrap;
    justify-content: center;
    gap: 4px;
  }

  .pagination li {
    display: inline-block;
  }

  .pagination a,
  .pagination .page-link {
    display: inline-block;
    padding: 5px 12px;
    margin: 0;
    border: 1px solid #ddd;
    text-decoration: none;
    color: #333;
  }

  .pagination .active .page-link {
    background-color: #088178;
    color: white;
    border-color:  #088170;
  }

  .pagination a:hover {
    background-color: #f5f5f5;
  }

</style>

<h1>My Wallet</h1>

<div class="wallet-container">
    <div class="wallet-balance">
        <div class="balance-header">
            <h2>Available Balance</h2>
        </div>
        <div class="balance-amount">
            <i class="fas fa-wallet"></i>
      
            <span>₹ <%= wallet?.balance >= 0 ? wallet.balance.toFixed(2) : '0.00' %></span>

        </div>
        <div class="balance-actions">
            <button class="btn-add-money">ADD MONEY</button>
        </div>
    </div>
    
    <div class="wallet-transactions">
        <h2>Transaction History</h2>
        
        <% if (transactionHistory && transactionHistory.length > 0) { %>
            <div class="transaction-list">
                <%  for(let i= 0 ; i < transactionHistory.length ; i++) { %>
                    <div class="transaction-item">
                        <div class="transaction-icon <%= transactionHistory[i]?.status %>">
                            <i class="fas fa-<%= transactionHistory[i]?.status === 'credited' ? 'arrow-down' : 'arrow-up' %>"></i>
                        </div>
                        <div class="transaction-details">
                           
                            <p class="transaction-date"><%= transactionHistory[i]?.transaction_date?.toLocaleString('en-IN' , { timeZone: 'Asia/Kolkata' }) %></p>
                               
                        </div>
                        <div class="transaction_type <%= transactionHistory[i]?.status %>"> 
                            <% if(transactionHistory[i].transaction_type && transactionHistory[i]?.transaction_type === 'order'){ %>
                                 <%=    'product purchased' %>
                             <%   } else if(transactionHistory[i]?.transaction_type === 'refund') { %>
                               <%=      'product refund' %>
                              <%  } %>
                             
                        </div>

                        <div class="transaction-amount <%= transactionHistory[i].type %>">
                            <%= transactionHistory[i]?.status === 'credited' ? '+' : '-' %> ₹<%= transactionHistory[i]?.amount.toFixed(2) %>
                        </div>
                    </div> 
                   
                <% }; %> 
            </div>

          <div class="pagination-container"> 
               
           <nav aria-label="Page navigation">
              <ul class="pagination justify-content-center">
         
               <% if (currentPage > 1) { %>
                   <% if (currentPage > 2) { %> 
                    <li class="page-item">
                      <a class="page-link" href="?page=1">First</a>
                    </li>
                    <% } %>
                  <li class="page-item">
                      <a class="page-link" href="?page=<%= currentPage - 1 %>">Prev</a>
                  </li>
               <% } %>

                   <% 
                      let startPage = Math.max(1, currentPage - 1);  
                      let endPage = Math.min(totalPages, startPage + 3);  

                      if (endPage - startPage < 3) {
                         startPage = Math.max(1, endPage - 3);  
                       }
                    %>

                   <% for (let i = startPage; i <= endPage; i++) { %>
                
                      <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                        <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                      </li>
                   <% } %>

                    <% if (endPage < totalPages) { %>
                        <li class="page-item disabled">
                           <span class="page-link">...</span>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page=<%= totalPages %>"><%= totalPages %></a>
                        </li>
                     <% } %>
                    
                     <% if (totalPages > currentPage) { %> 
                            
                              <li class="page-item">
                                <a class="page-link" href="?page=<%= currentPage + 1 %>">Next</a>
                              </li>
                            
                      
                     <% } %>

              </ul>
            </nav>
           
       </div>


        <% } else { %>
            <div class="empty-transactions">
                <div class="empty-icon">
                    <i class="fas fa-receipt"></i>
                </div>
                <h3>No Transactions Yet</h3>
                <p>Your transaction history will appear here</p>
            </div>
        <% } %>
    </div>
</div>

<div id="addMoneyModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add Money to Wallet</h2>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <form id="addMoneyForm">
                <div class="form-group">
                    <label for="amount">Enter Amount (₹)</label>
                    <input type="number" id="amount" name="amount" min="1" step="1" placeholder="Enter amount">
                </div>
                
                <div class="quick-amounts">
                    <button type="button" class="quick-amount" data-amount="100">₹100</button>
                    <button type="button" class="quick-amount" data-amount="500">₹500</button>
                    <button type="button" class="quick-amount" data-amount="1000">₹1000</button>
                </div>
                
                <div class="payment-methods">
                    <h3>Payment Method</h3>
                    <div class="payment-options">
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="card" checked>
                            <span class="option-label">
                                <i class="fas fa-credit-card"></i>
                                <span>Credit/Debit Card</span>
                            </span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="upi">
                            <span class="option-label">
                                <i class="fas fa-mobile-alt"></i>
                                <span>UPI</span>
                            </span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="netbanking">
                            <span class="option-label">
                                <i class="fas fa-university"></i>
                                <span>Net Banking</span>
                            </span>
                        </label>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-proceed">PROCEED</button>
                </div>
            </form>
        </div>
    </div>
</div>